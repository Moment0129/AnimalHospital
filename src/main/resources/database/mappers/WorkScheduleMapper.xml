<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.vet.main.workSchedule.WorkScheduleDAO">
	
	<!-- 일정 목록 -->
	<select id="getWorkList" resultType="WorkScheduleVO">
			SELECT W.*, E.EMPNAME, D.DEPTNAME, P.POSITIONNAME 
	  		  FROM WORKSCHEDULE W
					INNER JOIN EMP E
	  						ON W.USERNAME = E.USERNAME
	  				INNER JOIN DEPARTMENT D 
	  						ON E.DEPTNO = E.DEPTNO
	  				INNER JOIN POSITION P
	  						ON E.POSITIONNO = P.POSITIONNO	
	</select>
	
	<!-- 일정 상세 -->
	<select id="getWorkSchedule" resultType="WorkScheduleVO" parameterType="WorkScheduleVO">
		SELECT W.*, E.EMPNAME, D.DEPTNAME, P.POSITIONNAME 
  		  FROM WORKSCHEDULE W
				INNER JOIN EMP E
  						ON W.USERNAME = E.USERNAME
  				INNER JOIN DEPARTMENT D 
  						ON E.DEPTNO = E.DEPTNO
  				INNER JOIN POSITION P
  						ON E.POSITIONNO = P.POSITIONNO	
	  	 WHERE WORKNO = #{workNo} 		
	</select>

	<insert id="addWorkSchedule" parameterType="WorkScheduleVO">
		INSERT INTO WORKSCHEDULE
		VALUES
		(NULL, #{username}, #{workDate}, #{workTime}, #{homeTime}, #{deptName}, #{positionName}, #{empName})	
	</insert>
	
	<update id="updateWorkSchedule" parameterType="WorkScheduleVO">
		UPDATE WORKSCHEDULE
		SET
		WORKDATE = #{workDate},
		WORKTIME = #{workTime},
		HOMETIME = #{homeTime}
		WHERE WORKNO = #{workNo}
	</update>
	
	<delete id="delWorkSchedule" parameterType="WorkScheduleVO">
		DELETE FROM SURGERY
		WHERE WORKNO = #{workNo};		
	</delete>

</mapper>